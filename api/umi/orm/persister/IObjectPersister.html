<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="index, follow, all" />
        <title>umi\orm\persister\IObjectPersister |     UMI.Framework | API
</title>
        	<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" />
	<link rel="stylesheet" type="text/css" href="../../../css/umi-content.css" />
                    </head>
        <body id="class">
            <div class="header">
        <ul>
            <li><a href="../../../classes.html">Classes</a></li>
                            <li><a href="../../../namespaces.html">Namespaces</a></li>
                        <li><a href="../../../interfaces.html">Interfaces</a></li>
            <li><a href="../../../traits.html">Traits</a></li>
            <li><a href="../../../doc-index.html">Index</a></li>
            
        </ul>

        <div id="title"></div>

            <div class="type">Interface</div>
    <h1><a href="../../../umi/orm/persister.html">umi\orm\persister</a>\IObjectPersister</h1>
    </div>
        <div class="content">
                <p>    interface
    <strong>IObjectPersister</strong></p>

            <div class="description">
            <p>Синхронизатор объектов бизнес-транзакций с базой данных (Unit Of Work).</p>
            <p>
</p>
        </div>
    
    
    
            <h2>Methods</h2>

            <table>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_getIsPersisted">getIsPersisted</a>()
                    <p>Проверяет, являются ли все объекты в памяти синхронизированными с БД</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_executeTransaction">executeTransaction</a>(callable $transaction, array $affectedConnections = array())
                    <p>Запускает произвольную бизнес-транзакцию.</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
                </td>
                <td class="last">
                    <a href="#method_commit">commit</a>()
                    <p>Записывает изменения всех объектов в БД (бизнес транзакция).</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a>[]
                </td>
                <td class="last">
                    <a href="#method_getInvalidObjects">getInvalidObjects</a>()
                    <p>Валидирует все измененные и новые объекты, возвращает список невалидных объектов.</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_validateObject">validateObject</a>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)
                    <p>Валидирует объект</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
                </td>
                <td class="last">
                    <a href="#method_markAsNew">markAsNew</a>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)
                    <p>Помечает объект как новый</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
                </td>
                <td class="last">
                    <a href="#method_markAsDeleted">markAsDeleted</a>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)
                    <p>Помечает объект как удаленный</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
                </td>
                <td class="last">
                    <a href="#method_markAsModified">markAsModified</a>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)
                    <p>Помечает объект как измененный</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_storeNewBelongsToRelation">storeNewBelongsToRelation</a>(<a href="../../../umi/orm/metadata/field/relation/BelongsToRelationField.html"><abbr title="umi\orm\metadata\field\relation\BelongsToRelationField">BelongsToRelationField</abbr></a> $belongsToRelation, <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object, <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $relatedObject)
                    <p>Сохраняет новую BelongsTo-связь для объекта.</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_clearObjectsState">clearObjectsState</a>()
                    <p>Очищает списки добавленных, модифицированных, перемещенныз и удаленных объектов.</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
                </td>
                <td class="last">
                    <a href="#method_clearObjectState">clearObjectState</a>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)
                    <p>Выгружает объект из всех хранилищ.</p>
                </td>
                <td></td>
            </tr>
            </table>


        <h2>Details</h2>

                        <h3 id="method_getIsPersisted">
        <div class="location">at line 27</div>
        <code>            public            bool
    <strong>getIsPersisted</strong>()</code>
    </h3>
    <div class="details">
        <p>Проверяет, являются ли все объекты в памяти синхронизированными с БД</p>
        <p>
</p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_executeTransaction">
        <div class="location">at line 37</div>
        <code>            public            
    <strong>executeTransaction</strong>(callable $transaction, array $affectedConnections = array())</code>
    </h3>
    <div class="details">
        <p>Запускает произвольную бизнес-транзакцию.</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>callable</td>
                <td>$transaction</td>
                <td>callable-функция, выполняемая внутри транзакции. Если при транзакция выкидывает исключение, происходит автоматический rollback запросов</td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$affectedConnections</td>
                <td>соединения, которые задействованы в транзакции</td>
            </tr>
            </table>

            
            
                            <h4>Exceptions</h4>

                    <table>
                    <tr>
                <td><abbr title="NotAllowedOperationException">NotAllowedOperationException</abbr></td>
                <td>если есть не завершенная бизнес-транзакция.</td>
            </tr>
                    <tr>
                <td><a href="http://php.net/RuntimeException"><abbr title="RuntimeException">RuntimeException</abbr></a></td>
                <td>если транзакция завершилась не успешно</td>
            </tr>
            </table>

            
                    </div>
    </div>

                <h3 id="method_commit">
        <div class="location">at line 48</div>
        <code>            public            <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
    <strong>commit</strong>()</code>
    </h3>
    <div class="details">
        <p>Записывает изменения всех объектов в БД (бизнес транзакция).</p>
        <p>Валидация объектов при этом не выполняется. Получить список невалидных объектов
можно вызвав метод getInvalidObjects().
Если при сохранении какого-либо объекта возникли ошибки - все изменения
автоматически откатываются</p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table>
                    <tr>
                <td><a href="http://php.net/RuntimeException"><abbr title="RuntimeException">RuntimeException</abbr></a></td>
                <td>если транзакция не успешна</td>
            </tr>
            </table>

            
                    </div>
    </div>

                <h3 id="method_getInvalidObjects">
        <div class="location">at line 55</div>
        <code>            public            <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a>[]
    <strong>getInvalidObjects</strong>()</code>
    </h3>
    <div class="details">
        <p>Валидирует все измененные и новые объекты, возвращает список невалидных объектов.</p>
        <p>Запускается автоматически на момент коммита.</p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a>[]</td>
            <td>массив невалидных объектов, либо пустой массив, если все измененные объекты валидны</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_validateObject">
        <div class="location">at line 62</div>
        <code>            public            bool
    <strong>validateObject</strong>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)</code>
    </h3>
    <div class="details">
        <p>Валидирует объект</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td>результат валидации</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_markAsNew">
        <div class="location">at line 69</div>
        <code>            public            <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
    <strong>markAsNew</strong>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)</code>
    </h3>
    <div class="details">
        <p>Помечает объект как новый</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_markAsDeleted">
        <div class="location">at line 76</div>
        <code>            public            <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
    <strong>markAsDeleted</strong>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)</code>
    </h3>
    <div class="details">
        <p>Помечает объект как удаленный</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_markAsModified">
        <div class="location">at line 83</div>
        <code>            public            <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
    <strong>markAsModified</strong>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)</code>
    </h3>
    <div class="details">
        <p>Помечает объект как измененный</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_storeNewBelongsToRelation">
        <div class="location">at line 92</div>
        <code>            public            
    <strong>storeNewBelongsToRelation</strong>(<a href="../../../umi/orm/metadata/field/relation/BelongsToRelationField.html"><abbr title="umi\orm\metadata\field\relation\BelongsToRelationField">BelongsToRelationField</abbr></a> $belongsToRelation, <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object, <a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $relatedObject)</code>
    </h3>
    <div class="details">
        <p>Сохраняет новую BelongsTo-связь для объекта.</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/metadata/field/relation/BelongsToRelationField.html"><abbr title="umi\orm\metadata\field\relation\BelongsToRelationField">BelongsToRelationField</abbr></a></td>
                <td>$belongsToRelation</td>
                <td>
</td>
            </tr>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$relatedObject</td>
                <td>
</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_clearObjectsState">
        <div class="location">at line 104</div>
        <code>            public            
    <strong>clearObjectsState</strong>()</code>
    </h3>
    <div class="details">
        <p>Очищает списки добавленных, модифицированных, перемещенныз и удаленных объектов.</p>
        <p>Все изменения, которые были не применены будут утеряны.</p>
        <div class="tags">
            
            
            
                    </div>
    </div>

                <h3 id="method_clearObjectState">
        <div class="location">at line 112</div>
        <code>            public            <a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a>
    <strong>clearObjectState</strong>(<a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a> $object)</code>
    </h3>
    <div class="details">
        <p>Выгружает объект из всех хранилищ.</p>
        <p>
</p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td><a href="../../../umi/orm/object/IObject.html"><abbr title="umi\orm\object\IObject">IObject</abbr></a></td>
                <td>$object</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td><a href="../../../umi/orm/persister/IObjectPersister.html"><abbr title="umi\orm\persister\IObjectPersister">IObjectPersister</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

    
            </div>
            <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/" target="_top">Sami, the API Documentation Generator</a>.
    </div>
    </body>
</html>
